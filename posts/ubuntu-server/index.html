<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tips for an Ubuntu Server | Rover</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.97.0" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Winston Tsia">
<meta name="keywords" content="Ubuntu">
<meta name="description" content="Description">
<link rel="stylesheet" type="text/css" media="screen" href="/rover/css/normalize.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/rover/css/main.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/rover/css/all.css" /><link rel="stylesheet" href="/rover/css/katex.css" crossorigin="anonymous">
<script defer src="/rover/js/katex.js"  integrity="" crossorigin="anonymous"></script>
<script defer src="/rover/js/auto-render.js" integrity="" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script>
document.addEventListener("DOMContentLoaded", function() { renderMathInElement(document.body, { delimiters: [ {left: "$$", right: "$$", display: true}, {left: "$", right: "$", display: false} ] }); });
</script>
<script






src="/rover/">
</script>




<meta property="og:title" content="Tips for an Ubuntu Server" />
<meta property="og:description" content="Description" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wtsia.github.io/rover/posts/ubuntu-server/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-26T21:24:43-07:00" />
<meta property="article:modified_time" content="2022-09-26T21:24:43-07:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Tips for an Ubuntu Server"/>
<meta name="twitter:description" content="Description"/>

<meta itemprop="name" content="Tips for an Ubuntu Server">
<meta itemprop="description" content="Description"><meta itemprop="datePublished" content="2022-09-26T21:24:43-07:00" />
<meta itemprop="dateModified" content="2022-09-26T21:24:43-07:00" />
<meta itemprop="wordCount" content="435">
<meta itemprop="keywords" content="Ubuntu," />
</head>
<body>
<header>
<div id="avatar">
<a href="https://wtsia.github.io/rover/"><img src="/rover/img/about.jpg" alt="Rover"></a>
</div>
<div id="titletext">
<h2 id="title"><a href="https://wtsia.github.io/rover/">Rover</a></h2>
</div>
<div id="title-description">
<p id="subtitle"><a href="https://wtsia.github.io/rover/" target="_blank">Rover</a> is a blog for teaching or storing concepts.</p>
<div id="social">
<nav><ul>
<li><a href="https://github.com/wtsia"><i title="Github" class="icons fab fa-github"></i></a></li>
<li><a href="/rover/index.xml"><i title="RSS" class="icons fas fa-rss"></i></a></li>
<li><a><i title="Switch Dark Mode" class="dark-mode icons fas fa-moon"></i></a></li>
</ul></nav>
</div>
</div>
<div id="mainmenu">
<nav>
<ul>
<li><a href="/rover/">Home</a></li>
<li><a href="/rover/posts">All Posts</a></li>
<li><a href="/rover/about">About</a></li>
<li><a href="/rover/tags">Tags</a></li>
<li><a href="/rover/categories">Categories</a></li>
<li><a href="/rover/files">Files</a></li>
</ul>
</nav>
</div>
</header>
<main>
<div class="post">
<article>
<div class="post-header">
<div class="meta">
</div>
<div class="matter">
<h1 class="title">Tips for an Ubuntu Server</h1>
<p class="post-meta">
<span class="post-meta">



</span>

</p>
</div>
</div>
<div class="markdown">
<h2 id="useful-server-commands">Useful server commands</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>//useful for monitoring changes to a `.log` file in real time.
</span></span><span style="display:flex;"><span>watch -n 1 tail /var/log/&lt;webserver&gt;/&lt;something&gt;.log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// query icanhazip.com for your ip address
</span></span><span style="display:flex;"><span>curl -4 icanhazip.com
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// show ubuntu firewall status&#39; numbered
</span></span><span style="display:flex;"><span>sudo ufw status numbered
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// delete &#39;n&#39; rule
</span></span><span style="display:flex;"><span>sudo ufw delete &#39;n&#39;
</span></span></code></pre></div><h1 id="setting-up-reverse-proxy-with-caddy-or-nginx">Setting up Reverse Proxy with Caddy or Nginx</h1>
<p>To create a web server that is accessible from a domain, we will be using Caddy or Nginx proxy manager to set up our local reverse proxy and manage Nginx from a friendly UI.</p>
<h2 id="caddy">Caddy</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>echo &#34;deb [trusted=yes] https://apt.fury.io/caddy/ /&#34; | sudo tee -a /etc/apt/sources.list.d/caddy-fury.list
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo apt install caddy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo systemctl start caddy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// edit caddy file
</span></span><span style="display:flex;"><span>sudo nano /etc/caddy/Caddyfile
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo systemctl reload caddy
</span></span></code></pre></div><h2 id="docker">Docker</h2>
<h3 id="installation">Installation</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>// update list. If your output seems abnormal, take a moment to think on your next step. This is a guide that worked for me on Ubuntu 22.04.1 LTS
</span></span><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// install prerequisites:
</span></span><span style="display:flex;"><span>sudo apt install apt-transport-https ca-certificates curl software-properties-common
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// add a GPG key for the official Docker repo:
</span></span><span style="display:flex;"><span>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Add docker rpo to APT sources:
</span></span><span style="display:flex;"><span>echo &#34;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&#34; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// update existing list of packages
</span></span><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// check you are installing from the Docker repo
</span></span><span style="display:flex;"><span>apt-cache policy docker-ce
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// install docker, docker container, containerd, cli and plugins
</span></span><span style="display:flex;"><span>sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// check docker is installed
</span></span><span style="display:flex;"><span>sudo systemctl status docker
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// adding yourself as part of the docker group
</span></span><span style="display:flex;"><span>sudo usermod -aG docker ${USER}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>//log out and log back in or:
</span></span><span style="display:flex;"><span>su - ${USER}
</span></span></code></pre></div><h2 id="port-forwarding">Port Forwarding</h2>
<ul>
<li>TCP/UDP: Connecting and holding to an endpoint/Sending a signal and hoping it arrives</li>
<li>dealing with busy port:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sudo netstat -nlptu | grep 80
</span></span><span style="display:flex;"><span>sudo systemctl stop nginx
</span></span><span style="display:flex;"><span>sudo systemctl stop apache
</span></span></code></pre></div><h2 id="server-security">Server Security</h2>
<p><code>sudo ufw enable</code></p>
<ul>
<li>make sure to enable the server firewall. As of ubuntu</li>
</ul>
<h2 id="maldet-linux-malware-detection">Maldet: Linux Malware Detection</h2>
<p>Make sure to have <code>clamscan</code> installed so that maldet can utilize the clamav binary for the scanner engine.</p>
<p><code>maldet --scan-all &lt;directory&gt;</code>: scan the entirety of a directory and subdirectories</p>
<p><code>maldet -u</code>: update maldet</p>
<h2 id="transcoding">Transcoding</h2>
<p>To properly change track order of an <code>.mkv</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>mkvmerge --output &#34;your_file (1).mkv&#34; &#34;(&#34; &#34;your_file.mkv&#34; &#34;)&#34; --track-order 0:0,0:2,0:1
</span></span></code></pre></div><h3 id="converting-mkv-to-h264-with-ffmpeg">Converting mkv to h264 with FFmpeg</h3>
<p>EDIT: This question has become very popular and is one of the top results for searching &ldquo;convert mkv to h264 ffmpeg&rdquo; and thus I feel it is appropriate to add that for anyone stumbling upon this question to rather use</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ffmpeg -i input.mkv -c:v libx264 -c:a aac output.mp4
</span></span></code></pre></div><p><a href="https://stackoverflow.com/questions/30898671/converting-mkv-to-h264-ffmpeg" target="_blank">link</a></p>

</div>
<div class="tags">
<div class="taxosfloating_left">
<p>Categories</p>
</div>
<div class="termsfloating_right">
<p>
<a href="/rover/categories/computer-networking/">computer-networking</a>
<a href="/rover/categories/it/">it</a>
</p>
</div>
<div class="clearit"></div>
<div class="tags">
<div class="taxosfloating_left">
<p>Tags</p>
</div>
<div class="termsfloating_right">
<p>
<a href="/rover/tags/ubuntu/">ubuntu</a>
</p>
</div>
<div class="clearit"></div>
</div>
</article>
</div>
</main>
<footer>
© Copyright notice | <a href="https://github.com/dataCobra/hugo-vitae" target="_blank">Vitae</a> theme for <a href="https://gohugo.io" target="_blank">Hugo</a>
</footer><script src="/rover/js/dark-mode.js"></script>

</body>
</html>
